<div data-controller="search">
  </%= render "layouts/shared/search-form" %>
  <div class="search-form">
    <%= form_with url: map_path, method: :get, class: "search-form-inner", data: { search_target: "form" } do %>

      <div class="container row justify-content-center">
        <div class="d-flex col-12 py-3">
          <%= text_field_tag :query,
            params[:query],
            class: "form-control search-input",
            placeholder: "We grow together!"
          %>
          <button class="btn-sprouts">
            <i class="fa-solid fa-leaf fa-1.5x"></i>
          </button>
        </div>
      </div>
    <% end %>
    <div class="btn-map">
      <a href="/map">
        <i class="far fa-map fa-2x"></i>
      </a>
    </div>
  </div>

  <div class="query-result">
    <% if params[:query] %>
        <h4 class="text-center"><%= "Did you find your new plant?" %></h4>
    <% end %>
  </div>

  <div class="mapbox">
    <div id="map-card"
      data-target="search.map"
      data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
      data-map-target-lat-value="<%= @target_lat %>"
      data-map-target-lng-value="<%= @target_lng %>">
    </div>
  </div>
  <div class="nav-buttons">
  <%= link_to "ðŸŒ± BACK ðŸŒ±", request.referer || root_path %>
  <%= link_to "ðŸª´ BACK HOME ðŸª´", root_path %>
  </div>
</div>
